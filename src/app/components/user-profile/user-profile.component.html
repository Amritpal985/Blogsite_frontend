<app-spinner [isLoading]="isLoading"></app-spinner>

<div class="profile-container" *ngIf="user">
  <!-- Profile Header -->
  <mat-card class="profile-header mt-5">
    <img class="avatar" alt="User Avatar" src="data:image/jpeg;base64,{{ user.image }}" />
    <div class="header-details">
      <h2>{{ user.fullname }}</h2>
      <p class="email"><mat-icon>email</mat-icon> {{ user.email }}</p>
    </div>
  </mat-card>

  <!-- Tabs -->
  <mat-tab-group>
    <!-- Info Tab -->
    <mat-tab label="Info">
      {{ user.about_me }}
    </mat-tab>

    <!-- Chats Tab -->
    <mat-tab label="Chats">
      <app-chat></app-chat>
    </mat-tab>

    <!-- Update Profile Tab -->
    <mat-tab label="Update Profile">
      <div class="update-profile-form">
        <form [formGroup]="profileForm" (ngSubmit)="updateProfile()">
          <mat-form-field class="full-width">
            <mat-label>Fullname</mat-label>
            <input matInput formControlName="fullname" />
          </mat-form-field>
          <mat-form-field class="full-width">
            <mat-label>Username</mat-label>
            <input matInput formControlName="username" />
          </mat-form-field>
          <mat-form-field class="full-width">
            <mat-label>Email</mat-label>
            <input matInput type="email" formControlName="email" />
          </mat-form-field>
          <mat-form-field class="full-width">
            <mat-label>New Password</mat-label>
            <input matInput type="password" formControlName="newPassword" />
          </mat-form-field>
          <mat-form-field class="full-width">
            <mat-label>Confirm Password</mat-label>
            <input matInput type="password" formControlName="confirmPassword" />
          </mat-form-field>

          <button mat-raised-button color="primary mb-3" type="submit">Update Profile</button>
        </form>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
